<!DOCTYPE html>
<html ng-app="d2h_App" ng-app lang="ca">
<head>
    <meta charset="utf-8">

    <link href="../external/bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../external/angular-ui/ui-select-0.13.2/dist/select.min.css" rel="stylesheet">
    <style type="text/css">
    a {cursor: pointer;}
    span.glyphicon.d2h_sortActivated {color:red}
    label {font-weight:	normal;} /* remove font-weight:bold form Bootstrap */
    /**
     * [ng-cloak] is used to prevent show templates, see:
     * https://docs.angularjs.org/api/ng/directive/ngCloak
     */
    [ng-cloak] {  display: none !important; }
    .red {color:red}
    
    /**
     * Validations colors
    .ng-invalid.ng-dirty {
        border-color: red
    }
    .ng-valid.ng-dirty {
        border-color: green
    }
     */
    
    </style>
    <script src="../external/angular-1.4.8/angular.min.js"></script>
    <script src="../external/angular-1.4.8/angular-sanitize.min.js"></script>
    <script src="../external/angular-1.4.8/i18n/angular-locale_ca.js"></script>
    <script src="../external/angular-ui/ui-bootstrap-tpls-1.0.3.min.js"></script>
    <script src="../external/angular-ui/ui-select-0.13.2/dist/select.min.js"></script>
    <script>
        var d2h_App = angular.module('d2h_App', ['ui.bootstrap', 'ngSanitize', 'ui.select']);
        var d2h_local = {};
    </script>

    <title>Simple Datagrid with search, sort and paging using AngularJS, PHP, MySQL</title>
</head>
<body>
    <div class="container">
    
<!-- START "../code/templates/angular1/tables/paged.html.php" [[ -->
<!-- ======================================== -->

<div ng-controller="d2h_1">
$${filter}
<div class="row">
    <div class="col-md-12" id="d2h_1">
        <h3>Unitats familiars</h3>
        <table class="table table-striped table-bordered">
            <thead><tr>
                
<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>id <a
    title="ordre creixent"
    ng-click="sortBy('id', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='id' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('id', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='id' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>Nom UF <a
    title="ordre creixent"
    ng-click="sortBy('name', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='name' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('name', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='name' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>uf_name <a
    title="ordre creixent"
    ng-click="sortBy('uf_name', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='uf_name' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('uf_name', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='uf_name' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>active <a
    title="ordre creixent"
    ng-click="sortBy('active', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='active' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('active', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='active' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>created <a
    title="ordre creixent"
    ng-click="sortBy('created', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='created' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('created', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='created' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/heads/sortable.html.php" [[ -->
<!-- ======================================== -->

<th>UF mentora <a
    title="ordre creixent"
    ng-click="sortBy('mentor_uf', false);"><span
    aria-label="ordre creixent" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='mentor_uf' && !reverse}"
    class="glyphicon glyphicon-sort-by-alphabet"></span></a><a
    title="ordre invers"
    ng-click="sortBy('mentor_uf', true);"><span
    aria-label="ordre invers" aria-hidden="true"
    ng-class="{d2h_sortActivated: predicate=='mentor_uf' && reverse}"
    aria-hidden="true"
    class="glyphicon glyphicon-sort-by-alphabet-alt"></span></a></th>

<!-- END  "../code/templates/angular1/tables/heads/sortable.html.php" ]] -->

            </tr></thead>
            <tfoot ng-show="filtered.length > 0" ng-cloak><tr>
                <td colspan="6">
                    
<!-- START "../code/templates/angular1/forms/page.html.php" [[ -->
<!-- ======================================== -->

<div class="row" ng-controller="d2h_1_page">
    <form name="d2h_1_page" class="simple-form"  novalidate>
        <div class="form-inline">
<!-- START "../code/templates/angular1/forms/layouts/none.html.php" [[ -->
<!-- ======================================== -->


<!-- START "../code/templates/angular1/forms/inputs/button.html.php" [[ -->
<!-- ======================================== -->

<button class="btn btn-default hidden-xs "
    title="$$Refres&gt;&quot;hàdata"
    ng-click="readPage()">
    <span class="glyphicon glyphicon-refresh"
        aria-label="$$Refres&gt;&quot;hàdata"
        aria-hidden="true"></span>
    <span class="hidden-xs hidden-sm"></span>
</button>
<!-- END  "../code/templates/angular1/forms/inputs/button.html.php" ]] -->


<!-- END  "../code/templates/angular1/forms/layouts/none.html.php" ]] -->

<!-- START "../code/templates/angular1/forms/layouts/none.html.php" [[ -->
<!-- ======================================== -->


<!-- START "../code/templates/angular1/forms/inputs/text.html.php" [[ -->
<!-- ======================================== -->

<input type="text" class="form-control" 
    ng-model="d2h_page.pageSize"
    ng-change="changed()"
    ng-model-options="{ debounce: 500 }"
    
    name="d2h_3"
    
>

<!-- END  "../code/templates/angular1/forms/inputs/text.html.php" ]] -->


<!-- END  "../code/templates/angular1/forms/layouts/none.html.php" ]] -->

<!-- START "../code/templates/angular1/forms/layouts/none.html.php" [[ -->
<!-- ======================================== -->


<!-- START "../code/templates/angular1/forms/inputs/button.html.php" [[ -->
<!-- ======================================== -->

<button class="btn btn-default hidden-xs "
    title="$$Ne.&gt;xtàpage"
    ng-click="nextPage()">
    <span class="glyphicon glyphicon-forward"
        aria-label="$$Ne.&gt;xtàpage"
        aria-hidden="true"></span>
    <span class="hidden-xs hidden-sm"></span>
</button>
<!-- END  "../code/templates/angular1/forms/inputs/button.html.php" ]] -->


<!-- END  "../code/templates/angular1/forms/layouts/none.html.php" ]] -->
</div>
    </form>
    <span ng-init="start()" ng-cloak>
        Filtered {{filtered.length}} of {{data.length}}
    </span>
</div>

<!-- END  "../code/templates/angular1/forms/page.html.php" ]] -->

                </td>
            </tr></tfoot>
            <tbody 
                ng-show="filtered.length > 0" ng-cloak><tr 
                    ng-repeat="item in filtered = (data | filter:search | orderBy :predicate :reverse)">
                
<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  class="text-right">{{item.id}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  >{{item.name}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  >{{item.uf_name}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  >{{item.active}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  >{{item.created | date:'dd-MM-yyyy'}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

<!-- START "../code/templates/angular1/tables/cells/default.html.php" [[ -->
<!-- ======================================== -->

<td  class="text-right">{{item.mentor_uf}}</td>

<!-- END  "../code/templates/angular1/tables/cells/default.html.php" ]] -->

            </tr></tbody>
        </table>
        <div class="alert alert-warning" role="alert"
            ng-show="filtered.length == 0"
        ng-cloak>
            No data found
        </div>
    </div>
</div>
<span ng-init="start()"></span>
</div>
<!-- END  "../code/templates/angular1/tables/paged.html.php" ]] -->

                
<script>
// START "../code/templates/angular1/tables/paged.js" [[
// ========================================
var d2h_gridPagedCtr = function($scope, $http, pageDefaults) {
    var vRender_urlRequest = "_controller.php?model=aixada_ufs:default&" + 'lang=ca';
    $scope.d2h_sort = 'account_id';
    $scope.d2h_page = pageDefaults();
    
    // server
    var _req = function() {
        return {
            method: 'POST',
            url: vRender_urlRequest,
            headers: {
                'Content-Type': undefined
            },
            data: {
                d2h_oper: 'read',
                d2h_filter: {},
                d2h_sort: $scope.d2h_sort,
                d2h_page: $scope.d2h_page
            }
        };
    };
    
    $scope.readPage = function() {
        $scope.d2h_page.pageStart = 1; //current page
        $http(_req()).then(
            function(response) { // Ok
                $scope.data = response.data.rows;
                // $scope.status = response.status;
            }, function(response) { // Error
                // $scope.data = response.data || "Request failed";
                // $scope.status = response.status;
                console.log("IRROR");
            }
        );
    };
    $scope.nextPage = function() {
        $scope.d2h_page.pageStart = 
            parseInt($scope.d2h_page.pageStart, 10) +
            parseInt($scope.d2h_page.pageSize, 10);
        $http(_req()).then(
            function(response) { // Ok
                Array.prototype.push.apply(
                    $scope.data,
                    response.data.rows
                );
            }, function(response) { // Error
                console.log("IRROR");
            }
        );
    };
    $scope.sortBy = function(predicate, reverse) {
        $scope.predicate = predicate;
        $scope.reverse = reverse;
    };
    $scope.start = function() {
        $scope.readPage();
       //$scope.sortBy('id', true);
    };
};
d2h_App.controller("d2h_1", [
    '$scope', '$http',
    "d2h_1_page" + '_defaults',
    d2h_gridPagedCtr
]);
// END  "../code/templates/angular1/tables/paged.js" ]]

// START "../code/templates/angular1/forms/page.js.php" [[
// ========================================

d2h_App.controller('d2h_1_page', ['$scope', function ($scope) {
    $scope.changed = function() {
        $scope.readPage();
    };
}]);
d2h_App.factory('d2h_1_page_defaults', [function() {
    return function() {
        return {"pageSize":10};
    };
}]);

// END  "../code/templates/angular1/forms/page.js.php" ]]
</script>    </div>
</body>
</html>
